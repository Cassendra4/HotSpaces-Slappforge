{"EDITOR_STATE":{"allProjectFiles":{"b533effd-4673-45e8-9678-7ea451c676aa":{"id":"b533effd-4673-45e8-9678-7ea451c676aa","parent":null,"name":"HotSpaces-Slappforge","type":"DIRECTORY","isDirectory":true,"children":["ec8c92db-1846-4639-b85c-0b9499e8940e"],"isRemovable":false,"filePath":"HotSpaces-Slappforge"},"ec8c92db-1846-4639-b85c-0b9499e8940e":{"id":"ec8c92db-1846-4639-b85c-0b9499e8940e","parent":"b533effd-4673-45e8-9678-7ea451c676aa","name":"create_user.js","type":"LAMBDA_FILE","isDirectory":false,"children":[],"isRemovable":true,"filePath":"HotSpaces-Slappforge/create_user.js","code":"let AWS = require('aws-sdk');\nconst ddb = new AWS.DynamoDB.DocumentClient();\nexports.handler = function (event, context, callback) {\n\tconsole.log(event);\n\tvar currentTimestamp = new Date();\n\tvar username = JSON.parse(event.body).username;\n\tvar email = JSON.parse(event.body).email;\n\tvar firstName = JSON.parse(event.body).first_name;\n\tvar lastName = JSON.parse(event.body).last_name;\n\tvar age = JSON.parse(event.body).age;\n\tvar gender = JSON.parse(event.body).gender;\n\tvar interestedIn = JSON.parse(event.body).interested_in;\n\tvar password = JSON.parse(event.body).password;\n\tvar userAvatar = JSON.parse(event.body).user_avatar;\n\tvar contactNumber = JSON.parse(event.body).contact_number;\n\tvar lat = JSON.parse(event.body).last_known_lat;\n\tvar long = JSON.parse(event.body).last_known_long;\n\tvar currentTime = currentTimestamp.toLocaleString();\n\tddb.put({\n\t\tTableName: 'hs_user',\n\t\tItem: {\n\t\t\t'username': username,\n\t\t\t'email': email,\n\t\t\t'first_name': firstName,\n\t\t\t'last_name': lastName,\n\t\t\t'age': age,\n\t\t\t'gender': gender,\n\t\t\t'interested_in': interestedIn,\n\t\t\t'password': password,\n\t\t\t'user_avatar': userAvatar,\n\t\t\t'contact_number': contactNumber\n\t\t}\n\t}, function (err, data) {\n\t\tconsole.log('err', err);\n\t\tconsole.log('data', data);\n\t\tif (err) {\n\t\t\tcallback(err, null);\n\t\t} else {\n\n\t\t\tddb.put({\n\t\t\t\tTableName: 'hs_sort_table',\n\t\t\t\tItem: {\n\t\t\t\t\t'gender': gender,\n\t\t\t\t\t'username': username,\n\t\t\t\t\t'last_known_lat': lat,\n\t\t\t\t\t'last_updated_timestamp': currentTime,\n\t\t\t\t\t'last_known_long': long\n\t\t\t\t}\n\t\t\t}, function (err, data) {\n\t\t\t\tconsole.log('err', err);\n\t\t\t\tconsole.log('data', data);\n\t\t\t\tif (err) {\n\t\t\t\t\tcallback(err, null);\n\t\t\t\t} else {\n\t\t\t\t\tlet response = {\n\t\t\t\t\t\t\"statusCode\": 200,\n\t\t\t\t\t\t\"headers\": {\n\t\t\t\t\t\t\t\"my_header\": \"my_value\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"body\": JSON.stringify(data),\n\t\t\t\t\t\t\"isBase64Encoded\": false\n\t\t\t\t\t};\n\t\t\t\t\tcallback(null, response);\n\t\t\t\t}\n\t\t\t});\n\n\n\t\t}\n\t});\n\n\tcallback(null, 'Successfully executed');\n}","resources":["apigusEast1HotSpacescreateUserpost","ddbhsuser","ddbhssorttable","ddbhssorttable","ddbhsuser"],"triggers":[{"resourceName":"apigusEast1HotSpacescreateUserpost","config":{}}],"version":149}},"rootNode":"b533effd-4673-45e8-9678-7ea451c676aa","openFiles":["ec8c92db-1846-4639-b85c-0b9499e8940e"],"currentFileId":"ec8c92db-1846-4639-b85c-0b9499e8940e","resources":{"apigusEast1HotSpacescreateUserpost":{"name":"apigusEast1HotSpacescreateUserpost","type":"API_GATEWAY","config":{"selectedRegion":"us-east-1","apiMode":1,"apiName":"HotSpaces","apiId":"ycgnsjdsme","endpointType":"EDGE","rootResourceId":"0jpti5d03g","existingResources":{"/":"0jpti5d03g","/upload-user-profile":"1lfwzl","/get-locations":"5wiwi3","/get-user-profile":"6sl66w","/get-request-from":"ak2e19","/update-token":"flwmw2","/send-request-to-tp":"qj8a2x","/get-user-data":"ssxci3","/update-location":"tvks5u"},"resourceMode":0,"resourceName":"create-user","resourcePath":"/create-user","restMethod":"POST","proxyIntegration":true,"enableCORS":false,"stageMode":1,"stageName":"prod","stageDeploymentId":"u8t3dn"},"globallyEditable":true,"usage":{"ec8c92db-1846-4639-b85c-0b9499e8940e":{"operations":{},"occurrence":1,"triggers":[{}]}}},"ddbhsuser":{"name":"ddbhsuser","type":"DynamoDB","config":{"mode":1,"operation":"put","table":{"arn":"arn:aws:dynamodb:us-east-1:318300609668:table/hs_user","name":"hs_user","partitionKey":"username","partitionKeyType":"S","hasSortKey":false,"sortKey":"","sortKeyType":"S","mode":1},"isGlobalEditMode":false,"parameters":{"TableName":"hs_user","Item":{"username":"@{username}","email":"@{email}","first_name":"@{firstName}","last_name":"@{lastName}","age":"@{age}","gender":"@{gender}","interested_in":"@{interestedIn}","password":"@{password}","user_avatar":"@{userAvatar}","contact_number":"@{contactNumber}"}},"validator":{"validatableFields":{},"validity":true},"valid":true},"globallyEditable":false,"usage":{"ec8c92db-1846-4639-b85c-0b9499e8940e":{"operations":{"put":[{"TableName":"hs_user","Item":{"username":"@{username}","email":"@{email}","first_name":"@{firstName}","last_name":"@{lastName}","age":"@{age}","gender":"@{gender}","interested_in":"@{interestedIn}","password":"@{password}","user_avatar":"@{userAvatar}","contact_number":"@{contactNumber}"}}]},"occurrence":1,"triggers":[]}}},"ddbhssorttable":{"name":"ddbhssorttable","type":"DynamoDB","config":{"mode":0,"operation":"put","table":{"arn":"","name":"hs_sort_table","partitionKey":"gender","partitionKeyType":"S","hasSortKey":true,"sortKey":"username","sortKeyType":"S","mode":0,"primaryKeyType":"N"},"isGlobalEditMode":false,"parameters":{"TableName":"hs_sort_table","Item":{"gender":"@{gender}","username":"@{username}","last_known_lat":"@{lat}","last_updated_timestamp":"@{currentTime}","last_known_long":"@{long}"}},"validator":{"validatableFields":{},"validity":true},"valid":true},"globallyEditable":false,"usage":{"ec8c92db-1846-4639-b85c-0b9499e8940e":{"operations":{"put":[{"TableName":"hs_sort_table","Item":{"gender":"@{gender}","username":"@{username}","last_known_lat":"@{lat}","last_updated_timestamp":"@{currentTime}","last_known_long":"@{long}"}}]},"occurrence":1,"triggers":[]}}}},"packageJSON":{"dependencies":{"aws-sdk":{"name":"aws-sdk","version":"2.176.0","notRemovable":true},"slappforge-sdk":{"name":"@slappforge/slappforge-sdk","version":"0.0.3","notRemovable":true,"types":"\n                    declare class RDSQueryParams {\n    instanceIdentifier: string;\n    query: string;\n    inserts: Array<any>\n}\n\ndeclare namespace SL.AWS {\n    class RDS {\n        query(params: RDSQueryParams, callback: Function, connection: any): void;\n\n        beginTransaction(params: any, callback: Function): void;\n    }\n\n    class SQS {\n        receiveAndDeleteMessages(params: any, filteringCallBack: Function, deleteCallBack: Function, errorCallBack: Function): void;\n    }\n}\n"}}},"lambdaId":"f3c3862c-003b-40da-b675-f6e5cd070e72","changeExistingProject":false,"additionalFiles":[]},"PROJECT_META":{"projectName":"HotSpaces-Slappforge","projectDescription":"","projectVersion":"1.0.0","projectRegion":"us-east-1","repoName":"HotSpaces-Slappforge","repoUrl":"https://github.com/Cassendra4/HotSpaces-Slappforge","lastSave":1518003885920}}